<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Registration - Vortex Innovators</title>
    <meta name="description" content="Register for Code Red Events">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=2.7">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<script>
    // Check if user is logged in
    const currentUser = localStorage.getItem('vortexCurrentUser');
    if (!currentUser) {
        // Save current URL to redirect back after login
        sessionStorage.setItem('loginRedirectUrl', window.location.href);
        window.location.href = 'login.html';
    }
</script>

<body>

    <!-- Spotlight Effect Container -->
    <div id="spotlight"></div>

    <!-- Navigation -->
    <nav class="glass-nav">
        <div class="nav-content">
            <div class="brand-container">
                <a href="index.html">
                    <img src="https://image2url.com/r2/default/images/1771323328076-73754ca7-5637-40c3-9e39-77832d8f5a18.jpeg"
                        alt="Vortex Logo" class="nav-logo-img">
                </a>
                <a href="index.html" class="logo">VORTEX</a>
            </div>

            <a href="login.html" class="login-btn">
                <span class="icon">ðŸ”’</span> LOGIN
            </a>

            <div class="hamburger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
            <div class="nav-links">
                <!-- Mobile Only Header -->
                <div class="mobile-nav-header mobile-only">
                    <div class="shield-icon"><i class="fas fa-shield-alt"></i></div>
                    <div class="close-menu">&times;</div>
                </div>

                <a href="index.html" class="nav-item">Home</a>
                <a href="about.html" class="nav-item">About</a>
                <a href="events.html" class="nav-item">Events</a>
                <a href="gallery.html" class="nav-item">Gallery</a>

                <a href="login.html" class="login-btn mobile-only">
                    <span class="icon">ðŸ”’</span> LOGIN
                </a>
            </div>
        </div>
    </nav>

    <!-- Registration Section -->
    <section id="registration" class="content-section" style="padding-top: 150px;">
        <div class="section-header">
            <span class="section-tag">JOIN NOW</span>
            <h2 class="section-title">EVENT REGISTRATION</h2>
        </div>

        <!-- Dynamic Event Details -->
        <div id="event-info-container" class="section-container"
            style="max-width: 800px; margin-bottom: 40px; text-align: left; display: none;">
            <div
                style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 30px; backdrop-filter: blur(10px);">
                <h3
                    style="color: #00ffd5; margin-top: 0; font-size: 1.5rem; text-transform: uppercase; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; margin-bottom: 20px;">
                    <i class="fas fa-info-circle"></i> About Event
                </h3>
                <div id="event-about-content" style="color: #ddd; line-height: 1.6; margin-bottom: 30px;">
                    <!-- Content injected via JS -->
                </div>

                <h3
                    style="color: #ff4444; font-size: 1.5rem; text-transform: uppercase; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; margin-bottom: 20px;">
                    <i class="fas fa-gavel"></i> Rules & Regulations
                </h3>
                <ul id="event-rules-content" style="color: #ddd; line-height: 1.6; padding-left: 20px;">
                    <!-- Content injected via JS -->
                </ul>
            </div>
        </div>
        <div class="section-container" style="max-width: 600px;">
            <form id="registration-form" class="glass-form">
                <div class="form-group">
                    <label for="event-name">Event Name</label>
                    <input type="text" id="event-name" name="event-name" readonly class="form-control"
                        placeholder="Event Name">
                </div>

                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" required class="form-control"
                        placeholder="Enter your full name">
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required class="form-control"
                        placeholder="Enter your email">
                </div>

                <div class="form-group">
                    <label for="department">Department</label>
                    <select id="department" name="department" required class="form-control">
                        <option value="" disabled selected>Select Department</option>
                        <option value="CSE A">CSE A</option>
                        <option value="CSE B">CSE B</option>
                        <option value="CYBER SECURITY">CYBER SECURITY</option>
                        <option value="AI/DS">AI/DS</option>
                        <option value="BBA">BBA</option>
                        <option value="BCA A">BCA A</option>
                        <option value="BCA B">BCA B</option>
                        <option value="BCA">BCA</option>
                        <option value="MCA">MCA</option>
                        <option value="MBA">MBA</option>
                        <option value="DIPLOMA CSE">DIPLOMA CSE</option>
                        <option value="DIPLOMA AIML">DIPLOMA AIML</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone" required class="form-control"
                        placeholder="Enter your phone number">
                </div>

                <div class="form-group">
                    <label for="year">Year</label>
                    <select id="year" name="year" required class="form-control">
                        <option value="" disabled selected>Select Year</option>
                        <option value="1">1st Year</option>
                        <option value="2">2nd Year</option>
                        <option value="3">3rd Year</option>
                        <option value="4">4th Year</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="college">College</label>
                    <input type="text" id="college" name="college"
                        value="KMCT Institute of Emerging Technology and Management" readonly class="form-control">
                </div>



                <div class="form-group" style="text-align: center; margin-bottom: 20px;">
                    <a href="terms.html" target="_blank"
                        style="color: rgba(255, 255, 255, 0.7); text-decoration: underline; font-size: 0.9rem; margin-right: 15px;">Terms
                        and Conditions</a>
                    <a href="refund_policy.html" target="_blank"
                        style="color: rgba(255, 255, 255, 0.7); text-decoration: underline; font-size: 0.9rem;">Refund
                        Policy</a>
                </div>

                <button type="submit" class="submit-btn" style="width: 100%;">SECURED MY SPOT</button>
            </form>
        </div>
    </section>

    <!-- Contact Section -->
    <footer>
        <div class="contact-section">
            <h3 style="margin-top: 0;">CONNECT WITH US</h3>
            <div class="social-links">
                <a href="#" class="social-icon"><i class="fab fa-github"></i></a>
                <a href="mailto:vortexinnovators2k24@gmail.com" class="social-icon"><i class="fas fa-envelope"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
            </div>
            <p class="copyright">Â© 2026 VORTEX INNOVATORS. SYSTEM_STATUS: ONLINE</p>
            <p class="copyright" style="margin-top: 5px; font-size: 0.7rem;">
                <a href="privacy_policy.html" target="_blank" style="color: #666; text-decoration: none;">Privacy
                    Policy</a> |
                <a href="terms.html" target="_blank" style="color: #666; text-decoration: none;">Terms & Conditions</a>
                |
                <a href="refund_policy.html" target="_blank" style="color: #666; text-decoration: none;">Refund
                    Policy</a>
            </p>
        </div>
    </footer>
    </div>
    </footer>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="script.js"></script>
    <script>
        // Auto-fill event name from URL
        // Auto-fill event name from URL
        document.addEventListener('DOMContentLoaded', function () {
            // Event Data Mapping
            const eventDetails = {
                "CODE RED: NIGHT": {
                    about: "An intense 24-hour coding marathon where participants will solve real-world problems. Test your endurance, creativity, and coding skills in this overnight hackathon.",
                    rules: [
                        "Teams must consist of 2-4 members.",
                        "Participants must bring their own laptops and chargers.",
                        "Use of AI tools is allowed but must be disclosed.",
                        "Code plagiarism will lead to immediate disqualification.",
                        "Judging criteria: Innovation, Functionality, and Presentation."
                    ]
                },
                "DEBUGGING SPRINT": {
                    about: "Race against the clock to find and fix bugs in a provided codebase. Speed and accuracy are key in this high-pressure challenge.",
                    rules: [
                        "Individual participation only.",
                        "Access to internet is restricted during the sprint.",
                        "Points are awarded for each bug fixed and time taken.",
                        "Any attempt to modify the test cases will lead to disqualification."
                    ]
                },
                "ALGO MASTERS": {
                    about: "A competitive programming contest designed to test your algorithmic thinking and problem-solving skills against the best coders.",
                    rules: [
                        "Individual participation.",
                        "Languages allowed: C++, Java, Python.",
                        "No external libraries or pre-written code allowed.",
                        "Time limit per problem will be strictly enforced."
                    ]
                },
                "REACT DEEP DIVE": {
                    about: "A hands-on workshop exploring advanced concepts in React.js, including hooks, state management, and performance optimization.",
                    rules: [
                        "Participants should have basic knowledge of HTML, CSS, and JS.",
                        "Laptop is mandatory.",
                        "Software requirements: VS Code, Node.js installed."
                    ]
                },
                "TECH TRIVIA": {
                    about: "Test your knowledge of the tech world! From history of computing to latest trends, this quiz covers it all.",
                    rules: [
                        "Teams of 2 members.",
                        "No use of mobile phones during the quiz.",
                        "The quiz master's decision is final.",
                        "There will be 3 rounds: Elimination, Visual, and Rapid Fire."
                    ]
                },
                "UI/UX DASH": {
                    about: "A rapid prototyping challenge where you design a user interface for a given problem statement within a limited time.",
                    rules: [
                        "Individual or team of 2.",
                        "Tools allowed: Figma, Adobe XD, or Sketch.",
                        "Submission must include a working prototype link.",
                        "Focus on User Experience and Visual Design."
                    ]
                },
                "ELEVATE": {
                    about: "A flagship event focusing on career development, soft skills, and industry insights from experts.",
                    rules: [
                        "Open to all departments.",
                        "Registration is mandatory for entry.",
                        "Professional attire is recommended."
                    ]
                },
                "CYBER DEFENSE": {
                    about: "Introduction to ethical hacking and cybersecurity defense mechanisms. Learn how to protect systems from vulnerabilities.",
                    rules: [
                        "Laptop required (Kali Linux preferred but not mandatory).",
                        "Any unauthorized testing on college network is strictly prohibited.",
                        "Workshop material is for educational purposes only."
                    ]
                },
                "AI FRONTIERS": {
                    about: "Explore the cutting-edge of Artificial Intelligence and Generative models. Understand the future of AI technology.",
                    rules: [
                        "Open to all students.",
                        "Q&A session will follow the talk.",
                        "Notes and resources will be shared after the session."
                    ]
                }
            };

            // Auto-fill User Data
            const userStr = localStorage.getItem('vortexCurrentUser');
            if (userStr) {
                const user = JSON.parse(userStr);
                if (user.name) document.getElementById('name').value = user.name;
                if (user.email) document.getElementById('email').value = user.email;
            }

            const urlParams = new URLSearchParams(window.location.search);
            const eventName = urlParams.get('event');
            if (eventName) {
                const decodedName = decodeURIComponent(eventName);
                const eventField = document.getElementById('event-name');
                if (eventField) {
                    eventField.value = decodedName;
                } else {
                    console.error("Event Name field not found!");
                }

                // Populate Dynamic Content
                const infoContainer = document.getElementById('event-info-container');
                const cleanName = decodedName.trim();
                const details = eventDetails[cleanName];

                if (details && infoContainer) {
                    document.getElementById('event-about-content').innerText = details.about;

                    const rulesList = document.getElementById('event-rules-content');
                    rulesList.innerHTML = details.rules.map(rule => `<li>${rule}</li>`).join('');

                    infoContainer.style.display = 'block';
                }
            }
        });

        // Handle Registration & Direct Payment
        document.getElementById('registration-form').addEventListener('submit', async function (e) {
            e.preventDefault();

            const eventNameField = document.getElementById('event-name');
            if (!eventNameField.value || eventNameField.value.trim() === "") {
                alert("Error: Event Name is missing. Please go back to the Events page and select an event.");
                return;
            }

            const submitBtn = this.querySelector('.submit-btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Processing Registration...';
            submitBtn.disabled = true;

            // Get user email
            const userStr = localStorage.getItem('vortexCurrentUser');
            const user = userStr ? JSON.parse(userStr) : null;
            const userEmail = user ? user.email : '';

            // Get form values
            const eventData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                event: document.getElementById('event-name').value,
                department: document.getElementById('department').value,
                phone: document.getElementById('phone').value,
                year: document.getElementById('year').value,
                college: document.getElementById('college').value,
                location: "Main Auditorium",
                date: new Date().toISOString()
            };

            // --- DIRECT PAYMENT LINK FLOW ---
            try {
                // 1. Generate Ticket ID Locally
                const ticketId = "VTX-" + Date.now();
                submitBtn.textContent = 'Redirecting to Payment...';

                // 2. Save Registration Data for Success Page
                sessionStorage.setItem('regName', eventData.name);
                sessionStorage.setItem('regEvent', eventData.event);
                sessionStorage.setItem('regDept', eventData.department);
                sessionStorage.setItem('regId', ticketId);

                // 3. Open Payment Link in New Tab
                window.open('https://razorpay.me/@heydenbjohn', '_blank');

                // 4. Redirect to Success Page (Optimistic)
                setTimeout(() => {
                    window.location.href = 'registration_success.html';
                }, 1000);

            } catch (error) {
                console.error("Process error:", error);
                alert('Error: ' + error.message);
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
    </script>
</body>

</html>